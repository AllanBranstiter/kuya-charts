# ============================================
# Kuya Charts Backend Environment Variables
# ============================================
# Copy this file to .env and fill in your values
# NEVER commit .env file to version control!

# ============================================
# SERVER CONFIGURATION
# ============================================
# Port for the backend server (Railway will assign this dynamically in production)
PORT=5001
NODE_ENV=development

# ============================================
# DATABASE CONFIGURATION (PostgreSQL)
# ============================================
# Option 1 (RECOMMENDED): Use full connection string
# Railway automatically provides DATABASE_URL when you add PostgreSQL plugin
# Local format: postgresql://username:password@host:port/database
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/kuya_charts

# Option 2 (FALLBACK): Individual connection parameters
# These are used if DATABASE_URL is not set
DB_HOST=localhost
DB_PORT=5432
DB_NAME=kuya_charts
DB_USER=postgres
DB_PASSWORD=postgres

# Database Setup for Local Development:
# 1. Install PostgreSQL: https://www.postgresql.org/download/
# 2. Create database: createdb kuya_charts
#    OR via psql: CREATE DATABASE kuya_charts;
# 3. Update connection settings above
# 4. Run migrations: npm run migrate
# 5. Seed data: npm run seed

# Railway PostgreSQL Setup:
# 1. In Railway project, click "New" → "Database" → "Add PostgreSQL"
# 2. Railway automatically creates DATABASE_URL variable
# 3. No additional configuration needed!

# ============================================
# REDIS CACHE CONFIGURATION (Optional)
# ============================================
# Redis is optional - app gracefully degrades if unavailable
# Option 1 (RECOMMENDED): Use full Redis URL
# Railway automatically provides REDIS_URL when you add Redis plugin
REDIS_URL=redis://localhost:6379

# Option 2 (FALLBACK): Individual connection parameters
# These are used if REDIS_URL is not set
REDIS_HOST=localhost
REDIS_PORT=6379

# Enable cache logging (set to 'true' for debugging)
CACHE_LOGGING=false

# Local Redis Setup:
# - macOS: brew install redis && brew services start redis
# - Ubuntu: sudo apt install redis-server && sudo systemctl start redis
# - Verify: redis-cli ping (should return "PONG")

# Railway Redis Setup:
# 1. In Railway project, click "New" → "Database" → "Add Redis"
# 2. Railway automatically creates REDIS_URL variable
# 3. No additional configuration needed!

# ============================================
# AUTHENTICATION & SECURITY
# ============================================
# JWT Secret Key (CRITICAL: Change in production!)
# Generate secure secret: openssl rand -base64 32
# MUST be at least 256 bits (32 characters) for production
JWT_SECRET=your_jwt_secret_key_here_change_in_production_minimum_32_chars

# Railway Security Setup:
# Generate secret: openssl rand -base64 32
# Add to Railway: Variables → JWT_SECRET → (paste generated value)

# ============================================
# EXTERNAL API KEYS
# ============================================
# Alpha Vantage API Key (Required for stock data)
# Get free API key: https://www.alphavantage.co/support/#api-key
ALPHA_VANTAGE_API_KEY=your_alpha_vantage_api_key_here

# Railway API Key Setup:
# 1. Get API key from Alpha Vantage
# 2. Add to Railway: Variables → ALPHA_VANTAGE_API_KEY → (paste key)

# ============================================
# CORS CONFIGURATION
# ============================================
# Frontend URL for CORS (adjust for your frontend deployment)
# Local development
FRONTEND_URL=http://localhost:5173

# Railway Production Examples:
# FRONTEND_URL=https://your-frontend.up.railway.app
# FRONTEND_URL=https://yourdomain.com

# ============================================
# RAILWAY-SPECIFIC NOTES
# ============================================
# 1. PORT: Railway sets this automatically - use process.env.PORT || 5001
# 2. DATABASE_URL: Added automatically with PostgreSQL plugin
# 3. REDIS_URL: Added automatically with Redis plugin
# 4. Custom variables: Add manually in Railway dashboard under Variables
# 5. WebSockets: Supported by default on Railway
# 6. Build command: npm run build (runs TypeScript compilation)
# 7. Start command: npm start (runs compiled code from dist/)

# ============================================
# ENVIRONMENT VARIABLE CHECKLIST
# ============================================
# Required for Production:
# ✓ DATABASE_URL (auto from Railway PostgreSQL)
# ✓ JWT_SECRET (manually add to Railway)
# ✓ ALPHA_VANTAGE_API_KEY (manually add to Railway)
# ✓ FRONTEND_URL (manually add to Railway)
# ✓ NODE_ENV=production (manually add to Railway)
#
# Optional but Recommended:
# ✓ REDIS_URL (auto from Railway Redis)
# ✓ PORT (auto from Railway)
